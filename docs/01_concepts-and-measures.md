# Concepts and measures



## What is demography and why is it important?

:::{.rmdnote}
### Definitions of demography {.unnumbered}

* "...the scientific study of human **populations** primarily with respect to their **size**, their **structure** and their **development**; it takes into account the quantitative aspects of their general characteristics. [@population_multilingual_1958]
* The study of human **populations** in relation to the changes brought about by the interplay of **births**, **deaths**, and **migration**. [@pressat1985dictionary]
* "...the study of of human **populations** -- their **size**, **composition** and **distribution** across **space** -- and the **process** through which populations **change**. [@suda_demography]

*Emphasis added.*
:::

**Discussion questions**

<details>
<summary>What are the "processes" that the Stockholm University Demographic Unit's definition drives at? **Tap for answer**</summary>
* Birth
* Death
* Migration
</details><br>

<details>
<summary>What are three basic dimensions along which these changes occur? **Tap for answer**</summary>
* Time
* Space
* Structure
</details>
<br>

### Okay so what's a "population" then? {.unnumbered}

**For statistians:** A collection of items

**For demographers:**

1. A **collection of persons**...
1. who **meet certain criteria**
1. alive at a **specified point in time**...
<br><br>

<details>
<summary>Anything odd about point 1 above?</summary>
Non-human biologists do demography, too.

* Dr. Hal Caswell, Professor of Mathematical **Demography** at University of Amsterdam: https://www.uva.nl/en/profile/c/a/h.caswell/h.caswell.html
* Wrote influential book on matrix **population models** (aka... **demography**)

> "My research focuses on **population models**, usually based on matrices, for **plants, [non-human] animals, and humans**.  I am interested in stochastic processes in **demography**..."
>
> -- Hal Caswell (my emphasis)

<img width="25%" src="images/hal-caswell.jpg" alt="Hal Caswell">
<img width="25%" src="images/hal-caswell-matrix-population-models.jpg">
</details>
<br>

<details>
<summary>Let's think of some examples.</summary>
* **Collection:** People...
* **Criteria:** living in King County, Washington...
* **Specified point in time:** on April 1, 2019





<center>**2.3 M people**^[1-year American Community Survey 2019 total population estimate]</center>
</details>
<br>

**Also for demographers:**

<center>_Population as an **enduring** collection of individuals_</center>
<br>

<details>
<summary>Extending our Seattle metro example to "enduring" collections</summary>
Now we can see how the population changes, in this case over time...

King County population grew by 28% over 14 years.

```{=html}
<div id="htmlwidget-baa02b9eb3647db9c0eb" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-baa02b9eb3647db9c0eb">{"x":{"data":[{"x":[2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"y":[1755818,1826732,1859284,1875519,1916441,1937961,1969722,2007440,2044449,2079967,2117125,2149970,2188649,2233163,2252782],"text":"","type":"scatter","mode":"markers+lines","marker":{"autocolorscale":false,"color":"rgba(0,0,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)"}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"frame":null},{"x":[2005.6,2019.6],"y":[1755818,2252782],"text":["1.8M","2.3M"],"hovertext":["",""],"textfont":{"size":14.6645669291339,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":25.5707762557078,"l":34.337899543379},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Total population - King County, WA (2005-2019)","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2004.27,2020.33],"tickmode":"array","ticktext":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"tickvals":[2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],"categoryorder":"array","categoryarray":["2005","2006","2007","2008","2009","2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f","fixedrange":true},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1730969.8,2277630.2],"tickmode":"array","ticktext":["1.8M","1.9M","2.0M","2.1M","2.2M"],"tickvals":[1800000,1900000,2000000,2100000,2200000],"categoryorder":"array","categoryarray":["1.8M","1.9M","2.0M","2.1M","2.2M"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f","fixedrange":true},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false,"displayModeBar":false},"source":"A","attrs":{"38c05e59431e":{"x":{},"y":{},"type":"scatter"},"38c039943d06":{"x":{},"y":{}},"38c03e123d1e":{"x":{},"y":{},"label":{}}},"cur_data":"38c05e59431e","visdat":{"38c05e59431e":["function (y) ","x"],"38c039943d06":["function (y) ","x"],"38c03e123d1e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
```
</details>
<br>

### Why is demography important? {.unnumbered}

FILL THIS IN WITH COOL EXAMPLES OF WHAT DEMOGRAPHY CAN DO, PREVIEWING WHAT WE'LL DO IN CLASS, AND WHAT THEY'LL PREPARE TO DO WITH STAT 563.

## The balancing equation of population change

* Consider an observation period of length $T$
* For now, arbitrarily set the period's starting point at time $t = 0$

$\begin{align}
N(T) &= \textsf{ (Ending population size at time } T \textsf{)} \\
     &+ N(0) \textsf{ (Starting population size at time } 0 \textsf{)} \\
     &+ B[0,T] \textsf{ (Number of births from start to end)} \\
     &- D[0,T] \textsf{ (Number of deaths from start to end)} \\
     &+ I[0,T] \textsf{ (Number in-migrations from start to end)} \\
     &- O[0,T] \textsf{ (Number out-migrations from start to end)} \\
\end{align}$

<details>
<summary>Organized by ways to enter vs. exit a population...</summary>
$\begin{align}
N(T) &= N(0) \\
     &+ B[0,T] + I[0,T] \textsf{ (Ways to enter)} \\
     &- D[0,T] - O[0,T] \textsf{ (Ways to exit)}
\end{align}$
</details>
<br>

<details>
<summary>Organized by natural increase vs. net migration...</summary>
$\begin{align}
NI[0,T] &= B[0,T] - D[0,T] \textsf{ (Natural increase)} \\
NM[0,T] &= I[0,T] - O[0,T] \textsf{ (Net migration)}
\end{align}$
</details>
<br>

<details><summary>And putting it all together...</summary>
$N[T] = N[0] + NI[0,T] + NM[0,T]$
</details>
<br>

### Balancing equation as flows and stocks {.unnumbered}

INSERT A FLOW DIAGRAM HERE PERHAPS USING DIAGRAMR PACKAGE OR JUST A SNAPSHOT OF THE CHART DARRYL MADE. FLOWS ARE B, D, I, and O into, out of alive in pop, alive in another pop, unborn, and dead

### Balancing equation example: Sweden in 1988 {.unnumbered}


```{=html}
<div id="htmlwidget-6109936bf4a2fd1bb6bd" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-6109936bf4a2fd1bb6bd">{"x":{"filter":"none","vertical":false,"data":[["Starting population","Births","Deaths","In-migrations","Out-migrations","Ending population"],["N(1988)","B[1988,1989]","D[1988,1989]","I[1988,1989]","O[1988,1989]","N(1989)"],["8,416,599","+ 112,080","– 96,756","+ 51,092","– 21,461","= 8,461,554"],[null,"Enters","Exits","Enters","Exits",null],[null,"Positive impact on NI[0,T]","Negative impact on NI[0,T]","Positive impact on NM[0,T]","Negative impact on NM[0,T]",null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th><\/th>\n      <th><\/th>\n      <th><\/th>\n      <th><\/th>\n      <th><\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"ordering":false,"dom":"t","order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[0]; $(this.api().cell(row, 0).node()).css({'font-weight':'bold'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'color':value == \"Enters\" ? \"skyblue\" : value == \"Exits\" ? \"orange\" : null});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'background-color':value == \"Positive impact on NI[0,T]\" ? \"skyblue\" : value == \"Negative impact on NI[0,T]\" ? \"orange\" : value == \"Positive impact on NM[0,T]\" ? \"skyblue\" : value == \"Negative impact on NM[0,T]\" ? \"orange\" : null});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
```

:::{.rmdtip}
**DEMOGRAPHY & DATA SCIENCE**

### Balancing equation a company's employees {.unnumbered}

Let's apply this lesson to a population a data scientist might work with:

<center>**A company's employee headcount grows**</center>

Think of analogies to the components of the balancing equation
<br><br>

<details>
<summary>Analogy to births $B[0,T]$?</summary>
New hires $H[0,T]$

What are some weaknesses of this analogy? (Hint: Look at stock and flow chart)
</details>
<br>

<details>
<summary>Analogy to deaths $B[0,T]$?</summary>
Terminations (aka "separations" for the Bureau of Labor Statistics) $S[0,T]$

What are some weaknesses of this analogy? (Hint: Look at stock and flow chart)
</details>
<br>

<details>
<summary>Analogies to in-migrations and out-migrations $B[0,T]$?</summary>
Transfers into and out of departments, teams, job functions, etc.

* In-transfers $I[0,T]$
* Out-transfers $O[0,T]$

Collection of employees in specific department, team, job function, etc.
</details>
<br>
:::

## The structure of demographic rates

For demographers...

$$
\textsf{Rate} =
  \frac{\textsf{Number of occurrences}}
               {\textsf{Person-periods of exposure to the risk of occurrence}}
$$

<details>
<summary>From PHG, what type of rate is this? (Hint: Look in the "equation"!)</summary>
* Occurrence rate, or...
* Exposure rate
</details>
<br>

<details>
<summary>The book's definition uses "person-years." I used "person-periods." Why?</summary>
* Most traditional demographic rates are annual. Why might that be?
* In some cases, another period length is more appropriate. Example?
</details>
<br>

### Person-periods: A central concept in demography {.unnumbered}

<table width="100%"><tr>
<td>Let's illustrate with a lifeline of the life of Catherine the Great, Empress of Russia
</td>
<td>
<img src="images/catherine-the-great-smithsonian-magazine.png" width = 20%" alt="Catherine the Great and The Great">
</td>
</tr></table>


```{=html}
<div id="htmlwidget-7eecc7cbc919fb4fae4e" class="timevis html-widget" style="width:672px;height:480px;">
<div class="btn-group zoom-menu">
<button type="button" class="btn btn-default btn-lg zoom-in" title="Zoom in">+</button>
<button type="button" class="btn btn-default btn-lg zoom-out" title="Zoom out">-</button>
</div>
</div>
<script type="application/json" data-for="htmlwidget-7eecc7cbc919fb4fae4e">{"x":{"items":[{"content":"Born 1729","start":"1729-05-02","id":"1"},{"content":"Married Peter III 1745","start":"1745-07-17","id":"2"},{"content":"1st miscarriage 1752","start":"1752-12-20","id":"3"},{"content":"2nd miscarriage 1753","start":"1753-6-30","id":"4"},{"content":"Birthed Paul I 1754","start":"1754-10-01","id":"5"},{"content":"Birthed Anna 1757","start":"1757-03-08","id":"6"},{"content":"Birthed Alexei 1762","start":"1762-04-11","id":"7"},{"content":"(Maybe) birthed Elizabeth 1775","start":"1775-05-25","id":"8"},{"content":"Died 1796","start":"1796-11-17","id":"9"},{"content":"Reproductive years","start":"1744-05-02","end":"1779-05-02",".":"1729-05-02","id":"10"},{"content":"Reign as Empress of Russia","start":"1762-07-09","end":"1796-11-17","id":"11"}],"groups":null,"showZoom":true,"zoomFactor":0.5,"fit":true,"options":[],"height":null,"timezone":null,"api":[]},"evals":[],"jsHooks":[]}</script>
```

### From lifelines to event counts and person-periods {.unnumbered}

Basic facts

* Consider a group (population?) of individuals denoted $G$
* $A_i$: Beginning of lifeline of individual $i \in G$
* $B_i$: End of individual $i$'s lifeline
* $\theta_{ij}$: The $j$^th^ among $N_i$ occurrences in the lifeline of individual $i$
* $T_i = B_i - A_i$: The length of individual $i$'s lifeline


<details>
<summary>What's another demographic term for $T_i$?</summary>
**PERSON-PERIODS!**
</details>
<br>

Rate for the group defined over their entire lifelines:

$$\textsf{Rate}_G = \frac{\sum_{i \in G} N_i}
{\sum_{i \in G} T_i}$$

A toy example to illustrate...

<img src="01_concepts-and-measures_files/figure-html/lifelines_plot-1.png" width="672" />

<details><summary>How many **occurrences**?</summary>
5
</details>
<br>

<details><summary>How many **person-periods**?</summary>
50
</details>
<br>

<details><summary>What is the **life-time rate**?</summary>
5 $\div$ 50 = 10%
</details>
<br>

## Period rates and person-years

**Period rate**: A rate that limits occurrence and exposure time


## Principal period rates in demography

:::{.rmdtip}
**DEMOGRAPHY & DATA SCIENCE**

### Principal period rates for customers and employees {.unnumbered}

#### Customer analytics {.unnumbered}

#### Employee analytics {.unnumbered}
:::

## Growth rates in demography

### Crude growth rate

### Instantaneous growth rate

### Doubling time

### Comparison of crude growth rate and mean annualized growth rate

:::{.rmdtip}
**DEMOGRAPHY & DATA SCIENCE**

### Customer and employee headcount growth rates {.unnumbered}

#### Customer analytics {.unnumbered}

#### Employee analytics {.unnumbered}
:::

## Estimating period person years

:::{.rmdtip}
**DEMOGRAPHY & DATA SCIENCE**

### The promise (and peril) of knowing exact person years {.unnumbered}
:::

## The concept of a cohort

:::{.rmdtip}
**DEMOGRAPHY & DATA SCIENCE**

### The use and misuse of the term "cohort" in the corporate world {.unnumbered}

### Teach your boss the difference between age, period, and rate ASAP {.unnumbered}
:::

## Probabilities of occurrence of events

:::{.rmdtip}
**DEMOGRAPHY & DATA SCIENCE**

### Confusion between rates and probabilities in the corporate world {.unnumbered}
:::
